(window["webpackJsonpdevtest-weifan"]=window["webpackJsonpdevtest-weifan"]||[]).push([[0],{162:function(e,t,a){},165:function(e,t,a){},177:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(17),s=a.n(o),i=(a(92),a(93),a(84)),c=a(23),l=a(22),u=a(44),m={apiKey:"AIzaSyDrQHQ2_oTNPBIxA7TZPGbf1FXLGLCptO0",authDomain:"wf-shorten.firebaseapp.com",databaseURL:"https://wf-shorten.firebaseio.com",projectId:"wf-shorten",storageBucket:Object({NODE_ENV:"production",PUBLIC_URL:"",REACT_APP_API_KEY:"AIzaSyDrQHQ2_oTNPBIxA7TZPGbf1FXLGLCptO0",REACT_APP_AUTH_DOMAIN:"wf-shorten.firebaseapp.com",REACT_APP_DATABASE_URL:"https://wf-shorten.firebaseio.com",REACT_APP_PROJECT_ID:"wf-shorten",REACT_APP_MESSAGING_SENDER_ID:"228192887086",REACT_APP_APP_ID:"1:228192887086:web:9144a93d5965fb076cdabf"}).REACT_APP_STORAGE_BUCKET,appId:"1:228192887086:web:9144a93d5965fb076cdabf"},h=u.apps.length?u.app():u.initializeApp(m),f=a(24),d=(a(162),a(80),a(81),a(180)),p=function(){var e=h.database().ref("game"),t=Object(n.useState)(""),a=Object(l.a)(t,2),o=a[0],s=a[1],i=Object(n.useState)([]),c=Object(l.a)(i,2),u=(c[0],c[1]);Object(n.useEffect)(function(){m()},[]);var m=function(){e.orderByChild("timestamp").on("value",function(e){var t=[];null!==e&&(e.forEach(function(e){t.push({count:e.val().count,key:e.key,url:e.val().url})}),u(t.reverse()))})};return r.a.createElement("div",null,r.a.createElement("div",{className:"title"},"tic tac toe"),r.a.createElement("div",null,r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),window.location.href=o}},r.a.createElement(f.c,null,r.a.createElement(f.b,{onChange:function(e){return s(e.target.value)},value:o,placeholder:"Enter invite code"}),r.a.createElement(f.d,{type:"append"},r.a.createElement(f.a,{outline:!0,theme:"secondary"},r.a.createElement(d.a,{size:20})))))),r.a.createElement("div",{className:"button"},r.a.createElement(f.a,{onClick:function(){return function(){var t=Math.random().toString(36).substring(2,7);e.child(t).set({newGame:!0}).then(function(){return window.location.href=t}),localStorage.setItem(t,!0)}()},size:"bg",theme:"light",outline:!0},"Create New Game")))},b=a(82),E=a(62),v=a(63),w=a(66),O=a(64),g=a(67),y=(a(165),a(181));function N(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function j(e){return r.a.createElement("button",{className:"square",onClick:e.onClick},e.value)}var S=function(e){function t(){return Object(E.a)(this,t),Object(w.a)(this,Object(O.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(v.a)(t,[{key:"renderSquare",value:function(e){var t=this;return r.a.createElement(r.a.Fragment,null,this.props.disabled?r.a.createElement(j,{value:this.props.squares[e],onClick:function(){return t.props.onClick(e)}}):r.a.createElement(j,{value:this.props.squares[e]}))}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"board-row"},this.renderSquare(0),this.renderSquare(1),this.renderSquare(2)),r.a.createElement("div",{className:"board-row"},this.renderSquare(3),this.renderSquare(4),this.renderSquare(5)),r.a.createElement("div",{className:"board-row"},this.renderSquare(6),this.renderSquare(7),this.renderSquare(8)))}}]),t}(r.a.Component),P={history:[{squares:Array(9).fill("")}],stepNumber:0,xIsNext:!0,isX:!1,showReset:!1},A=function(e){function t(e){var a;return Object(E.a)(this,t),(a=Object(w.a)(this,Object(O.a)(t).call(this,e))).state=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?N(a,!0).forEach(function(t){Object(b.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):N(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},P),a}return Object(g.a)(t,e),Object(v.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=window.location.pathname.substr(1);localStorage.getItem(t)&&this.setState({isX:!0}),h.database().ref("game").child(t).on("value",function(t){t.exists()&&(t.val().newGame?console.log("new!"):e.setState({history:t.val().history,stepNumber:t.val().stepNumber,xIsNext:t.val().xIsNext,showReset:t.val().showReset}))})}},{key:"handleClick",value:function(e){var t=this,a=this.state.history.slice(0,this.state.stepNumber+1),n=a[a.length-1].squares.slice();k(n)||n[e]||(n[e]=this.state.xIsNext?"X":"O",this.setState({history:a.concat([{squares:n}]),stepNumber:a.length,xIsNext:!this.state.xIsNext},function(){console.log(t.state.history),h.database().ref("game").child(window.location.pathname.substr(1)).set({history:t.state.history,stepNumber:t.state.stepNumber,xIsNext:t.state.xIsNext})}))}},{key:"jumpTo",value:function(e){this.setState({stepNumber:e,xIsNext:e%2===0})}},{key:"reset",value:function(){h.database().ref("game").child(window.location.pathname.substr(1)).set(P)}},{key:"render",value:function(){var e,t=this,a=this.state.history,n=a[this.state.stepNumber],o=k(n.squares),s=a.length>9,i=a.length<3,c=(a.map(function(e,a){var n=a?"Go to move #"+a:"Go to game start";return r.a.createElement("li",{key:a},r.a.createElement("button",{onClick:function(){return t.jumpTo(a)}},n))}),!1),l=this.state.isX===this.state.xIsNext;return o?(e="Winner: "+o,c=!0):s?(e="No Winners",c=!0):e=l?"it's your turn!":"waiting opponent... ",r.a.createElement("div",{className:"game"},r.a.createElement("div",{className:"game-board"},i&&r.a.createElement(r.a.Fragment,null,r.a.createElement("b",null,"share URL"),r.a.createElement("p",null,r.a.createElement("a",{href:window.location.href},window.location.host,"/",window.location.pathname.substr(1)))),r.a.createElement(S,{squares:n.squares,onClick:function(e){return t.handleClick(e)},disabled:l}),r.a.createElement("div",{className:"info"},this.state.isX?r.a.createElement("div",null,"you're X"):r.a.createElement("div",null,"you're O"),r.a.createElement("b",null,e)),c&&r.a.createElement(f.a,{outline:!0,size:"sm",theme:"danger",onClick:function(){return t.reset()}},r.a.createElement(y.a,{size:15}))))}}]),t}(r.a.Component);function k(e){for(var t=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]],a=0;a<t.length;a++){var n=Object(l.a)(t[a],3),r=n[0],o=n[1],s=n[2];if(e[r]&&e[r]===e[o]&&e[r]===e[s])return e[r]}return null}var x=function(){var e=Object(n.useState)(!0),t=Object(l.a)(e,2),a=(t[0],t[1],Object(n.useState)(0)),o=Object(l.a)(a,2),s=o[0],i=o[1];Object(n.useEffect)(function(){c()},[]);var c=function(){var e=window.location.pathname.substr(1);console.log(e),h.database().ref("game").child(e).once("value").then(function(e){e.exists()?i(2):i(1)})};return r.a.createElement("div",null,0===s&&r.a.createElement("div",null,r.a.createElement("p",null,"Loading Game.."),r.a.createElement("a",{href:"/"},"Go Back?")),1===s&&r.a.createElement("div",null,r.a.createElement("p",null,"URL not found"),r.a.createElement("a",{href:"/"},"Go Back?")),2===s&&r.a.createElement(A,null))},C=(a(166),a(167),a(83));var I=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(C.Helmet,null,r.a.createElement("title",null,"tic tac toe"),r.a.createElement("meta",{name:"description",content:"This is a URL shortener website built with ReactJS & Firebase"})),r.a.createElement(i.a,null,r.a.createElement(c.a,{path:"/",exact:!0,component:p}),r.a.createElement(c.a,{path:"/:id",exact:!0,component:x})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(174).config(),s.a.render(r.a.createElement(I,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},87:function(e,t,a){e.exports=a(177)},92:function(e,t,a){},93:function(e,t,a){}},[[87,1,2]]]);
//# sourceMappingURL=main.807fcfee.chunk.js.map